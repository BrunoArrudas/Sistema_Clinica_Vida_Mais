{% extends "base.html" %}
{% block content %}

<h1 style="margin-bottom:20px;">Pacientes do Sistema Clínica Vida+</h1>

<div class="estatisticas">
    <div class="card estat-card" style="background-color:#0077b6; color:white;">
        <strong>Total de pacientes</strong>
        <div style="font-size:2rem;">{{ total_pacientes }}</div>
    </div>
    <div class="card estat-card" style="background-color:#0096c7; color:white;">
        <strong>Idade média</strong>
        <div style="font-size:2rem;">{{ idade_media or '-' }} anos</div>
    </div>
    <div class="card estat-card" style="background-color:#00b4d8; color:white;">
        <strong>Mais novo</strong>
        <div>{{ paciente_mais_novo.nome }} — {{ paciente_mais_novo.idade }} anos</div>
    </div>
    <div class="card estat-card" style="background-color:#48cae4; color:white;">
        <strong>Mais velho</strong>
        <div>{{ paciente_mais_velho.nome }} — {{ paciente_mais_velho.idade }} anos</div>
    </div>
</div>

<form method="GET" style="margin-bottom:20px;">
    <input type="text" name="busca" placeholder="Buscar paciente pelo nome" value="{{ busca or '' }}"
        style="padding:8px; border-radius:8px; border:1px solid #ccc; margin-top: 20px;">
    <button type="submit" class="btn">Buscar</button>
</form>

<a href="{{ url_for('cadastrar') }}" class="btn">Cadastrar novo paciente</a>

<div class="pacientes-container">
    {% for paciente in pacientes %}
    <div class="card paciente-card">
        <h3>{{ paciente.nome }}</h3>
        <p><strong>Idade:</strong> {{ paciente.idade }} anos</p>
        <p><strong>Telefone:</strong> {{ paciente.telefone }}</p>
        <div class="acoes">
            <a href="{{ url_for('editar', id=paciente.id) }}" class="btn">Editar</a>
            <a href="{{ url_for('excluir', id=paciente.id) }}" class="btn btn-voltar"
                onclick="return confirm('Tem certeza que deseja excluir?')">Excluir</a>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}